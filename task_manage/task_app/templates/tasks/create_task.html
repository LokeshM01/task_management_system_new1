{% extends "base_generic.html" %}
{% load static %}

{% block content %}
<div class="task-manager-container">
    <!-- Home Icon to Redirect to Home Page -->
    <div class="home-icon">
        <a href="{% if user.userprofile.category == "Departmental Manager" %}{% url 'home' %}{% else %}{% url 'assigned_to_me' %}{% endif %}">
            <img src="{% static 'task_app/images/home-icon.svg' %}" alt="Home" class="icon">
        </a>
    </div>
    <h2>Create a Task</h2>
    <hr>

    <div class="form-container">
        <form method="post" enctype="multipart/form-data" id="createTaskForm" action="{% url 'create_task' %}">
            {% csrf_token %}

            <!-- Assigned By (Disabled) -->
            <div class="form-group">
                <label for="assigned_by">Assigned by:</label>
                <input type="text" id="assigned_by" name="assigned_by" value="{{ request.user.username }}" disabled>
            </div>

            <!-- Ticket Type (Dynamic) -->
            <div class="form-group">
                <label for="id_ticket_type">Ticket Type:</label>
                {{ form.ticket_type }}
            </div>

            <!-- Priority (Dynamic) -->
            <div class="form-group">
                <label for="id_priority">Priority:</label>
                {{ form.priority }}
            </div>

            <!-- Department (Dynamic) -->
            <div class="form-group">
                <label for="id_department">Department:</label>
                {{ form.department }}
            </div>

            <!-- Assigned To (Dynamic) -->
            <div class="form-group">
                <label for="id_assigned_to">Assigned to:</label>
                {{ form.assigned_to }}
            </div>

            <!-- Deadline -->
            <div class="form-group">
                <label for="id_deadline">Deadline:</label>
                {{ form.deadline }}
            </div>

            <!-- Subject -->
            <div class="form-group full-width">
                <label for="id_subject">Subject:</label>
                {{ form.subject }}
            </div>

            <!-- Request Details -->
            <div class="form-group full-width">
                <label for="id_request_details">Request details:</label>
                {{ form.request_details }}
            </div>

            <!-- Attach File -->
            <div class="form-group">
                <label for="id_attach_file">Attach File:</label>
                {{ form.attach_file }}
            </div>

            <!-- Submit Button -->
            <button type="submit" class="submit-btn">Create Task</button>
        </form>
    </div>

  <!-- Success Popup -->
  <!-- <div id="successPopup" class="popup">
    <div class="popup-content">
        <p>Task created successfully!</p>
        <button onclick="closePopup()">âœ–</button>
    </div>
  </div>
  </div> -->

</div>



<!-- Inline CSS for styling -->
<style>
    .task-manager-container {
        position: relative;
    }

    /* Home Icon styling */
    .home-icon {
        position: absolute;
        top: 20px;
        left: 20px;
    }

    .home-icon img.icon {
        margin-top: -23px;
        width: 52px;
        height: 47px;
        cursor: pointer;
        filter: brightness(0) saturate(100%) invert(40%) sepia(80%) saturate(300%) hue-rotate(70deg) brightness(90%) contrast(100%);
    }

    .form-container {
        background-color: #ffffff;
        padding: 20px;
        border-radius: 8px;
        max-width: 800px;
        margin: 0 auto;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    h2 {
        text-align: center;
        color: #333;
    }

    hr {
        border: none;
        border-top: 2px solid #4CAF50;
        margin: 10px 0 20px;
    }

    .form-group {
        display: flex;
        flex-direction: column;
        margin-bottom: 15px;
    }

    .form-group label {
        font-weight: bold;
        color: #333;
        margin-bottom: 5px;
    }

    .form-group select, .form-group input[type="text"], 
    .form-group input[type="date"], .form-group textarea, 
    .form-group input[type="file"] {
        padding: 10px;
        font-size: 14px;
        border-radius: 4px;
        border: 1px solid #ccc;
        outline: none;
        width: 100%;
        box-sizing: border-box;
    }

    .submit-btn {
        background-color: #4CAF50;
        color: #ffffff;
        padding: 10px 20px;
        font-size: 16px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        width: 100%;
        margin-top: 20px;
    }

    .submit-btn:hover {
        background-color: #388E3C;
    }
</style>
{% endblock %}
